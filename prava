游댏 P콏칤stupov치 pr치va v Unixu (chmod)
P콏칤stupov치 pr치va objektu (souboru nebo adres치콏e) v z치kladn칤m unixov칠m syst칠mu jsou ulo쬰na ve 12 bitech. Pro popis obsahu t캩chto 12 bit콢 se pou쮂셨치 osmi캜kov치 soustava (oktalov치), proto쬰 jednou osmi캜kovou 캜칤slic칤 jsou pops치ny p콏esn캩 3 bity.

Pr치va jsou rozd캩lena na 4 trojice bit콢 (4 skupiny po 3 bitech):

Speci치ln칤 pr치va (SUID, SGID, Sticky bit)

Vlastn칤k (User)

Skupina (Group)

Ostatn칤 (Other)

Z치kladn칤 pr치va (r, w, x)
Pro ka쬯ou ze skupin (vlastn칤k, skupina, ostatn칤) se definuj칤 t콏i z치kladn칤 pr치va. Ka쬯칠 m치 svou 캜칤selnou hodnotu:

r (Read) - Pr치vo 캜칤st / zobrazit obsah. (Hodnota = 4)

w (Write) - Pr치vo zapisovat / m캩nit / mazat obsah. (Hodnota = 2)

x (Execute) - Pr치vo spustit (u souboru) / vstoupit (u adres치콏e). (Hodnota = 1)

Hodnoty se s캜칤taj칤. Pokud chce m칤t vlastn칤k v코echna pr치va (rwx), jeho hodnota je 4+2+1 = 7. Pokud m치 m칤t jen 캜ten칤 a spu코t캩n칤 (r-x), je to 4+1 = 5.

0400 = r-- --- --- (pouze vlastn칤k sm칤 캜칤st)

0200 = -w- --- --- (pouze vlastn칤k sm칤 zapisovat)

0100 = --x --- --- (pouze vlastn칤k sm칤 spou코t캩t)

Speci치ln칤 pr치va (SUID, SGID, Sticky bit)
Prvn칤 ze 캜ty콏 osmi캜kov칳ch 캜칤slic definuje pr치v캩 tato speci치ln칤 pr치va. I zde se hodnoty s캜칤taj칤:

4 = SUID

2 = SGID

1 = Sticky Bit

游녬 SUID (Set User ID)
Osmi캜kov치 hodnota: 4 (nap콏. chmod 4755 ...)

Symbolick칳 z치pis: u+s (v칳pis pr치v pak uk치쬰 rwsr-xr-x)

Co to d캩l치:

Pro soubory: Kdy je spustiteln칳 soubor s SUID bitem spu코t캩n, b캩쮂 s pr치vy vlastn칤ka souboru, nikoliv s pr치vy u쬴vatele, kter칳 ho spustil.

P콏칤klad: P콏칤kaz passwd. Tento program mus칤 upravit soubor /etc/shadow, kter칳 vlastn칤 root. Aby to mohl ud캩lat i b캩쬹칳 u쬴vatel (kdy si m캩n칤 sv칠 heslo), m치 program passwd nastaven SUID bit a vlastn칤 ho root. Program se tak na chv칤li spust칤 jako root, provede zm캩nu a skon캜칤.

Pro adres치콏e: V캩t코inou se ignoruje.

游뱋 SGID (Set Group ID)
Osmi캜kov치 hodnota: 2 (nap콏. chmod 2775 ...)

Symbolick칳 z치pis: g+s (v칳pis pr치v pak uk치쬰 rwxr-sr-x)

Co to d캩l치:

Pro soubory: Podobn칠 jako SUID. Program se spust칤 s pr치vy skupiny, kter치 soubor vlastn칤.

Pro adres치콏e: Velmi u쬴te캜n칠. V코echny nov칠 soubory a podadres치콏e vytvo콏en칠 v tomto adres치콏i automaticky zd캩d칤 skupinu nad콏azen칠ho adres치콏e (m칤sto prim치rn칤 skupiny u쬴vatele, kter칳 soubor vytvo콏il). To je kl칤캜ov칠 pro sd칤len칠 slo쬶y, kde m치 cel칳 t칳m p콏istupovat k nov캩 vytvo콏en칳m soubor콢m.

游늷 Sticky Bit
Osmi캜kov치 hodnota: 1 (nap콏. chmod 1777 ...)

Symbolick칳 z치pis: a+t (v칳pis pr치v pak uk치쬰 rwxrwxrwt)

Co to d캩l치:

Pro adres치콏e: Toto pr치vo se pou쮂셨치 t칠m캩콏 v칳hradn캩 na adres치콏칤ch. Pokud je nastaveno, soubory v tomto adres치콏i mohou mazat pouze jejich vlastn칤ci (nebo root), bez ohledu na to, zda maj칤 ostatn칤 u쬴vatel칠 pr치vo z치pisu (w) do adres치콏e.

P콏칤klad: Adres치콏 /tmp. Ka쬯칳 u쬴vatel sem m콢쬰 zapisovat a vytv치콏et soubory, ale d칤ky Sticky bitu nem콢쬰 smazat soubory jin칠ho u쬴vatele.

Pro soubory: D콏칤ve se pou쮂셨alo k udr쬰n칤 programu v pam캩ti, dnes je tato funkce na modern칤ch syst칠mech v podstat캩 ignorov치na.

P콏칤klady pou쬴t칤 p콏칤kazu chmod
Osmi캜kov칳 (oktalov칳) z치pis
chmod 644 soubor

Nastav칤 pr치va na rw-r--r--.

Vlastn칤k: 6 (4+2 = 캜ten칤 + z치pis)

Skupina: 4 (캜ten칤)

Ostatn칤: 4 (캜ten칤)

Symbolick칳 z치pis
chmod go-w soubor

Zak치쬰 (odstran칤) pr치vo na z치pis (-w) pro skupinu (g) a ostatn칤 (o).

chmod go= soubor

Sma쬰 (nastav칤 na nic) v코echna pr치va pro skupinu (g) a ostatn칤 (o).

chmod u+s soubor

P콏id치 (+) vlastn칤kovi (u) pr치vo SUID (s).

chmod g+s adresar

P콏id치 (+) skupin캩 (g) pr치vo SGID (s).

chmod a+rwxt /verejny_adresar

Typick칠 nastaven칤 pro ve콏ejn칳 pracovn칤 adres치콏. P콏id치 v코em (a = all) pr치va pro 캜ten칤 (r), z치pis (w), vstup (x) a nastav칤 Sticky bit (t).

chmod =rw,+X soubor_nebo_adresar

Zaj칤mav치 kombinace. Nastav칤 v코em pr치va rw (=rw). Pot칠 p콏id치 pr치vo spu코t캩n칤 (+X - velk칠 X) pouze tam, kde to d치v치 smysl: tj. bu캞 je to adres치콏, nebo pokud soubor u p콏edt칤m m캩l pr치vo x alespo켿 pro jednu kategorii (vlastn칤k, skupina nebo ostatn칤).
